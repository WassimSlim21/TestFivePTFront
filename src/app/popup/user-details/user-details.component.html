<div class="main-content">
  <div class="container">
      <div class="row-md-18">
          <div class="col-md-12">
              <div class="card">
                  <div class="card-header card-header-primary">
                      <h4 class="card-title">{{user?.name}}</h4>
                  </div>
                  <div class="card-body">

                      <div class="row">
                        <!-- USER IMAGE 'only if it's facebook ' -->
                        <div class="col-md-6">
                          <img *ngIf="user.provider_userId" src="https://graph.facebook.com/{{user?.provider_userId}}/picture?height=150&width=150"  class="rounded-circle align-center margin-auto">
                          <img *ngIf="!user.provider_userId" src="assets/img/person.png"  class="rounded-circle align-center margin-auto">

                         </div>
                            <!-- USER INFORMATIONS -->
                        <div class="col-md-6">

                          <mat-list>

                            <mat-list-item *ngIf="user?.email">Email: {{user?.email}}</mat-list-item>
                            <mat-divider *ngIf="user?.email"></mat-divider>
                            <mat-list-item *ngIf="user?.data?.phone"> Phone: {{user?.data?.phone}}</mat-list-item>
                            <mat-divider *ngIf="user?.data?.phone"></mat-divider>
                            <mat-list-item *ngIf="user?.data?.company_type"> Company ( {{user?.data?.company_type}}): {{user?.data?.company}}</mat-list-item>
                            <mat-divider *ngIf="user?.data?.company_type"></mat-divider>
                            <mat-list-item *ngIf="user?.data?.job"> Job: {{user?.data?.job}}</mat-list-item>
                            <mat-divider *ngIf="user?.data?.job"></mat-divider>
                            <mat-list-item *ngIf="user?.data?.website"> Website:<a href="{{user?.data?.website}}"> {{user?.data?.website}} </a></mat-list-item>
                            <mat-divider *ngIf="user?.data?.score"></mat-divider>
                            <mat-list-item *ngIf="user?.data?.score">Score: {{user?.score}}</mat-list-item>
                          </mat-list>
                        </div>
                    </div>

                    <div class="row">
                      <div class="col-md-12">
                        <mat-accordion>

                          <mat-expansion-panel >
                            <mat-expansion-panel-header>
                              <mat-panel-title>
                                Packs
                              </mat-panel-title>

                            </mat-expansion-panel-header>
                           <div class="d-flex flex-row bd-highlight mb-3">
                            <p class="m-4">{{user?.pack?.pack_name}}</p>
                              <mat-form-field  class="w-25 p-4">
                                <mat-label>Packs</mat-label>
                                <mat-select [(ngModel)]="selectedPack">
                                  <mat-option *ngFor="let pack of this.packs" [value]="pack._id" >
                                    {{pack?.pack_name}}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                              <button mat-raised-button color="warn"  class="m-4 h-auto" (click)="updateUserPack()">Save</button>

                            </div>

                          </mat-expansion-panel>

                          <!-- ACTIONS PANEL  -->

                          <mat-expansion-panel >
                            <mat-expansion-panel-header>
                              <mat-panel-title>
                                Actions
                              </mat-panel-title>


                            </mat-expansion-panel-header>
                            <mat-tab-group color="accent">
                              <mat-tab label="Teams">
                                <mat-list>

                                  <mat-list-item>GET: {{user?.actions?.team.GET || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> POST: {{user?.actions?.team.POST || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> PUT: {{user?.actions?.team.PUT || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> DELETE: {{user?.actions?.team.DELETE || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>

                                </mat-list>


                              </mat-tab>



                              <mat-tab label="Social Accounts">
                                <mat-list>
                                  <mat-list-item>GET: {{user?.actions['social-accounts'].GET || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> POST: {{user?.actions['social-accounts'].POST || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> PUT: {{user?.actions['social-accounts'].PUT || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> DELETE: {{user?.actions['social-accounts'].DELETE || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                </mat-list>
                              </mat-tab>



                              <mat-tab label="Benchmarks">
                                <mat-list>
                                  <mat-list-item>GET: {{user?.actions?.benchmarks?.GET || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> POST: {{user?.actions?.benchmarks?.POST || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> PUT: {{user?.actions?.benchmarks?.PUT || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> DELETE: {{user?.actions?.benchmarks?.DELETE || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                </mat-list>
                              </mat-tab>


                              <mat-tab label="Dashboards">
                                <mat-list>
                                  <mat-list-item>GET: {{user?.actions.dashboards.GET || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> POST: {{user?.actions.dashboards.POST || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> PUT: {{user?.actions.dashboards.PUT || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> DELETE: {{user?.actions.dashboards.DELETE || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                </mat-list>
                              </mat-tab>
                              <mat-tab label="Reports">
                                <mat-list>
                                  <mat-list-item>GET: {{user?.actions.reports.GET || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> POST: {{user?.actions.reports.POST || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> PUT: {{user?.actions.reports.PUT || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                  <mat-list-item> DELETE: {{user?.actions.reports.DELETE || 0}}</mat-list-item>
                                  <mat-divider></mat-divider>
                                </mat-list>
                              </mat-tab>

                            </mat-tab-group>

                          </mat-expansion-panel>


                              <!-- Social Accounts Panel  -->


                              <mat-expansion-panel >
                                <mat-expansion-panel-header>
                                  <mat-panel-title>
                                    Social Accounts
                                  </mat-panel-title>

                                </mat-expansion-panel-header>
                                <mat-tab-group color="accent">




                                  <mat-tab label="Facebook">
                                    <mat-list *ngFor="let page of user?.social_accounts">

                                       <mat-list-item >
                                        <p *ngIf="page.provider == 'facebook'"> <i class="fa fab fa-facebook pull-left"></i>  {{page?.title}} </p>
                                        </mat-list-item>
                                      <mat-divider></mat-divider>
                                    </mat-list>
                                  </mat-tab>

                                  <mat-tab label="Instagram">
                                    <mat-list  *ngFor="let page of user?.social_accounts">
                                      <mat-list-item>
                                        <p *ngIf="page.provider != 'facebook'"> <i class="fa fab fa-instagram pull-left"></i>  {{page?.title}} </p>
                                        </mat-list-item>
                                      <mat-divider></mat-divider>
                                    </mat-list>
                                  </mat-tab>



                                </mat-tab-group>

                              </mat-expansion-panel>


                                <!-- Dashboards Panel  -->

                                <mat-expansion-panel >
                                  <mat-expansion-panel-header>
                                    <mat-panel-title>
                                        Dashboards
                                    </mat-panel-title>
                                  </mat-expansion-panel-header>
                                  <mat-tab-group color="accent">

                                    <mat-tab label="Brand Insights" >
                                      <mat-chip-list>
                                        <span   *ngFor="let dashboard of user?.dashboards" >
                                        <mat-chip selected color="{{dashboard?.color}}" *ngIf="dashboard.type == 'SocialAccount'"
                                        [ngClass]="{'deleted':dashboard?.deleted_at}">
                                        {{dashboard?.name}} ({{dashboard?.nd_type}})
                                      </mat-chip>
                                        </span>
                                      </mat-chip-list>
                                    </mat-tab>

                                    <mat-tab label="Market insights" >
                                      <mat-chip-list >
                                        <span   *ngFor="let dashboard of user?.dashboards">
                                          <mat-chip  selected color="{{dashboard?.color}}" *ngIf="dashboard.type == 'Benchmark'" [ngClass]="{'deleted':dashboard?.deleted_at}">
                                             {{dashboard?.name}} ({{dashboard?.nd_type}})
                                          </mat-chip>
                                        </span>
                                      </mat-chip-list>
                                    </mat-tab>



                                  </mat-tab-group>

                                </mat-expansion-panel>



                        </mat-accordion>


                      </div>



                    </div>

                    <div class="row m-4 ">
                      <div class="col-md-6 ">
                        <a target="_blank" href="https://api.kpeiz.digital/simulate/{{user?._id}}">
                          <button mat-raised-button class="pull-right">Simulate</button>
                        </a>
                      </div>
                      <div class="col-md-6 ">
                       <button mat-raised-button class="pull-left btn-primary" (click)="comfirmDialog()"> Delete </button>
                      </div>
                    </div>


                  </div>

              </div>

          </div>
      </div>
  </div>
</div>


